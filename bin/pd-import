#!/usr/bin/env php
<?php

use Config\Config;
use Config\ConfigCreator;
use Cover\Amazon;
use Util\Database;
use Util\Log;
use Util\Mailer;
use Util\Validator;

if (file_exists(__DIR__ . '/../vendor/autoload.php')) {
    require __DIR__ . '/../vendor/autoload.php';
} elseif (file_exists(__DIR__ . '/../../../autoload.php')) {
    require __DIR__ . '/../../../autoload.php';
} else {
    fwrite(STDERR, 'ERROR: Composer dependencies not properly set up! Run "composer install" or see README.md for more details' . PHP_EOL);
    exit(1);
}

require '../bootstrap/init.php';

// init the DI container
$container = new Pimple\Container();
initContainer($container);

try {
    (new App($container))->run();
}catch(Exception $e) {
    fprintf(STDERR, "ERROR: %s\n", $e->getMessage());
}